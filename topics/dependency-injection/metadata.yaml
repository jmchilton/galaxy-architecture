# Example metadata.yaml for dependency-injection topic
# This serves as a reference implementation

topic_id: dependency-injection
title: Dependency Injection in Galaxy
status: draft  # draft | stable | deprecated

# Tracking
created: 2025-01-15
last_updated: 2025-01-15
last_updated_by: jmchilton

# Training slide metadata
training:
  questions:
    - What is dependency injection?
    - Why does Galaxy use dependency injection?
    - How do I use DI in controllers and tasks?
  objectives:
    - Understand the problems with the `app` god object
    - Learn about type-based dependency injection
    - Use DI in controllers and tasks
    - Understand the benefits of typing
  key_points:
    - "`app` was a god object that knew/did too much"
    - "Interfaces break circular dependencies"
    - "Type-based DI with Lagom simplifies construction"
    - "DI works uniformly across FastAPI, WSGI controllers, and tasks"
    - "Dependencies should form a DAG"
  time_estimation: 15m
  prerequisites:
    - architecture-frameworks
  contributors:
    - jmchilton
    - bgruening

# Sphinx documentation metadata
sphinx:
  section: Architecture
  subsection: Core Patterns
  level: intermediate  # beginner | intermediate | advanced
  toc_depth: 2

# Galaxy Hub metadata
hub:
  audience: [developers, contributors]
  tags: [architecture, design-patterns, dependency-injection]

# Cross-references
# Note: Some related topics may not exist yet (e.g., application-components, frameworks)
# These can be added when those topics are migrated
related_topics: []
related_code_paths:
  - lib/galaxy/di/
  - lib/galaxy/structured_app.py
  - lib/galaxy/app.py
  - lib/galaxy/managers/
  - lib/galaxy/webapps/galaxy/api/
  - lib/galaxy/celery/tasks.py

# Images used in slides (shared across topics)
images:
  - path: ../../images/app_py2.plantuml.svg
    description: "Python 2 era app structure"
    source: images/app_py2.plantuml.txt
  - path: ../../images/app_types_no_interface.plantuml.svg
    description: "Typed app without interface showing circular dependency"
    source: images/app_types_no_interface.plantuml.txt
  - path: ../../images/app_types.plantuml.svg
    description: "Typed app with StructuredApp interface breaking circular dependency"
    source: images/app_types.plantuml.txt
  - path: ../../images/app_decomposed.plantuml.svg
    description: "Decomposed app structure with dependency injection"
    source: images/app_decomposed.plantuml.txt
  - path: ../../images/lagom_ss.png
    description: "Lagom dependency injection library website screenshot"

# Claude context
claude:
  priority: high  # How important for dev questions
  focus_areas:
    - Dependency injection patterns
    - Manager initialization
    - Testing with injected dependencies

