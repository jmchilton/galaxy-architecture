topic_id: tests
title: Galaxy Testing
training:
  tutorial_number: 15
  subtitle: The architecture of Galaxy testing
  questions:
  - Where should I put a new test?
  - How do I write an API test?
  - When should I use an integration test vs an API test?
  - How do I test code that requires special Galaxy configuration?
  - How do I write Selenium/Playwright tests?
  objectives:
  - Use the decision tree to select appropriate test type
  - Write Python unit tests for isolated components
  - Write API tests using populators and assertions
  - Write integration tests with custom Galaxy configuration
  - Write Selenium tests using the smart component system
  - Understand CI workflows for each test type
  key_points:
  - Unit tests for isolated components (no server needed)
  - API tests for backend behavior via Galaxy API
  - Integration tests for custom Galaxy configurations
  - Framework tests for tool/workflow XML validation
  - Selenium/Playwright tests for UI with browser automation
  - Populators simplify test data creation
  - Each test type has a dedicated CI workflow
  time_estimation: 45m
  prerequisites:
  - project-management
sphinx:
  section: Architecture
  subsection: Testing
contributors:
  - jmchilton
related_topics:
  - project-management
agentic_operations:
  - name: review-vitests
    prompt: |
      Perform a code review on the provided Galaxy code. Accept input in any of following forms:
      * A working directory path (analyze git diff in that directory)
      * A Git commit reference (analyze changes in that commit)
      * A PR reference (analyze changes in that pull request)
      * A list of ES6/Typescript file paths (analyze those files)
      * A planning document (analyze the ES6/Typescript files in the plan)

      ## Who you are:

      - You are a vitest expert.
      - You are a frontend expert.
      - You are a Typescript unit testing expert.
      - You are a senior engineer who cares passionately about the long term sustainability of this project.
      - You are a skeptical of autogenerated unit test code that was never failing.
      - You are happy to do little experiments where you tweak tests and code to ensure they are
        actually testing something.

      ## What to do:

      - Review the Best Practices below for the projects best practices around unit testing.
      - Review the test code and find tests that should potentially be eliminated and explain why.
      - If the code has been committed, play with some of the code and ensure it is really testing what it claims to do.
      - Find repeated patterns and propose abstractions to reduce duplication and/or to make the code more readable.
      - Galaxy unit tests can be run via "yarn test" from the client/ directory of the Galaxy repository.

      ## Best Practices

      TODO: Summarize best practices from at least these content blocks: es6-best-practices, es6-best-practices-examples,
      es6-red-flags, es6-test-verification, es6-ai-guidelines.

    type: claude-slash-command

related_code_paths:
  - test/unit/
  - lib/galaxy_test/api/
  - lib/galaxy_test/base/populators.py
  - lib/galaxy_test/base/api_asserts.py
  - lib/galaxy_test/driver/integration_util.py
  - test/integration/
  - lib/galaxy_test/selenium/
  - lib/galaxy_test/workflow/
  - test/functional/tools/
  - .github/workflows/api.yaml
  - .github/workflows/integration.yaml
  - .github/workflows/selenium.yaml
  - .github/workflows/playwright.yaml
  - client/src/utils/navigation/navigation.yml
  # Client testing infrastructure
  - client/src/
  - client/tests/vitest/helpers.ts
  - client/tests/test-data/
  - client/src/api/client/__mocks__/
  - .github/workflows/client-unit.yaml
